# 交互模式

> AI 主动询问确认，与用户充分交互

---

## 模式特点

✅ **主动询问**：需求不明确时主动提问
✅ **技术选型确认**：提供方案供选择
✅ **分步确认**：每一步都等待确认
✅ **详细解释**：说明为什么这么做

---

## 工作流程

```
1. 读取需求文档
   ↓
2. 分析需求，提出问题
   ↓
3. 等待用户回答
   ↓
4. 设计技术方案（可能有多个）
   ↓
5. 展示方案，等待选择
   ↓
6. 开始开发（每步确认）
   ↓
7. 自动测试
   ↓
8. 展示结果，等待最终确认
   ↓
9. 通过或回滚
```

---

## 提示词模板

### 第1步：分析需求

```
请阅读 requirements/inbox/ 中的需求文档，然后：

## 需求分析

请分析以下需求：

[粘贴需求内容]

## 我的疑问

1. 这个需求的核心目标是什么？
2. 目标用户是谁？
3. 涉及哪些数据实体？
4. 有哪些边界情况？
5. 技术上有什么约束或偏好？

请逐一提出你的疑问，我会详细回答。
```

### 第2步：技术方案设计

```
基于你的理解和我的回答，请设计技术方案：

## 方案设计

请提供 1-2 个技术实现方案：

### 方案A
- 技术选型：
- 优点：
- 缺点：
- 适用场景：

### 方案B（如有）
- 技术选型：
- 优点：
- 缺点：
- 适用场景：

请说明你推荐哪个方案，为什么？
```

### 第3步：开发前确认

```
在开始开发前，请确认：

## 实施计划

请列出详细的实施步骤：

### 步骤1：[步骤名称]
- 预计时间：
- 涉及文件：
- 风险点：
- 需要我做些什么：

### 步骤2：...

## 我的确认

这个计划是否清晰？你有任何问题需要我澄清吗？

确认后我会开始执行，每完成一步我会向你汇报。
```

---

## 示例对话

### AI：需求分析

> 我阅读了需求文档，有以下疑问：
>
> 1. 用户注册时是否需要邮箱验证？
> 2. 密码强度要求是什么？
> 3. 是否需要第三方登录（如微信、GitHub）？

### 你：回答

> 1. 暂时不需要邮箱验证
> 2. 密码至少8位，包含字母和数字
> 3. 后续版本需要，v1.0 先不考虑

### AI：技术方案

> 基于以上信息，我提供两个方案：
>
> **方案A：使用 BCrypt + JWT**
> - 优点：安全、简单
> - 缺点：Token过期需要重新登录
>
> **方案B：使用 BCrypt + JWT + Refresh Token**
> - 优点：Token 可刷新，体验更好
> - 缺点：实现复杂一些
>
> 我推荐方案A，因为 v1.0 保持简单。你觉得呢？

### 你：选择方案

> 使用方案A，保持简单

### AI：实施计划

> 好的，我的实施计划：
>
> **步骤1：创建用户表**
> - 时间：5分钟
> - 文件：docs/design/v1.0/database.md
> - 风险：无
>
> **步骤2：开发用户注册API**
> - 时间：15分钟
> - 文件：UserMapper, UserService, UserController
> - 风险：密码加密可能有问题
>
> **步骤3：开发用户登录API**
> - 时间：15分钟
> - 文件：UserController
> - 风险：JWT 配置可能出错
>
> 这个计划可以吗？
>
> 另外，我需要你提供 JWT 密钥。

### 你：确认并提供信息

> 计划可以。JWT 密钥是：my-secret-key-123

### AI：开始开发

> 收到，现在开始步骤1...
>
> 步骤1完成！已创建数据库设计文档。
>
> 现在开始步骤2...
>
> 步骤2完成！已创建用户注册 API。
>
> ...（持续汇报）
>
> 全部完成！请检查 results.md 中的测试结果。

---

**最后更新**：2026-02-06
